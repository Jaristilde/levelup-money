import{c as B,u as I,r as l,j as e,C as w,a0 as $,d as p}from"./index-Ds5wnI9h.js";import{B as y}from"./button-DQkY-fFZ.js";import{B as H}from"./badge-CeXC3zK6.js";import{S as O}from"./shield-CNiF8pNf.js";import{C as V}from"./calendar-CJnJYa_c.js";import{U as q}from"./user-BM4DKcop.js";import{L as C}from"./loader-circle-mdnwaHHz.js";import{L as S}from"./lock-B2NHRulI.js";import{E as g}from"./eye-off-C7bZw_Of.js";import{E as j}from"./eye-DQXgYQ9e.js";import{C as v}from"./circle-alert-BRbZMlRY.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=B("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ae=()=>{const{user:R,profile:a,updateProfile:_,updatePassword:k}=I(),[o,x]=l.useState({full_name:"",email:"",avatar_type:"david"}),[r,c]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[u,D]=l.useState(!1),[f,E]=l.useState(!1),[b,F]=l.useState(!1),[m,N]=l.useState(!1),[d,P]=l.useState(!1),[n,i]=l.useState({}),L=[{value:"kevin",label:"Kevin - Getting Started",desc:"New to financial management"},{value:"jess",label:"Jess - Debt Fighter",desc:"Focused on debt reduction"},{value:"david",label:"David - Comprehensive Planner",desc:"Detailed financial tracking"},{value:"maria",label:"Maria - Optimizer",desc:"Efficiency focused"},{value:"ben",label:"Ben - Advanced Investor",desc:"Investment tracking"}];l.useEffect(()=>{a&&x({full_name:a.full_name,email:a.email,avatar_type:a.avatar_type})},[a]);const U=async t=>{t.preventDefault(),N(!0);try{const{error:s}=await _({full_name:o.full_name,avatar_type:o.avatar_type});if(s){p.error("Failed to update profile");return}if(o.avatar_type!==(a==null?void 0:a.avatar_type)){const h={kevin:"unaware",jess:"problem-aware",david:"solution-aware",maria:"product-aware",ben:"most-aware"};localStorage.setItem("awarenessLevel",h[o.avatar_type]),p.success("Dashboard updated! Refresh to see changes.")}}finally{N(!1)}},M=async t=>{t.preventDefault(),i({});const s={};if(r.currentPassword||(s.currentPassword="Current password is required"),r.newPassword?r.newPassword.length<8&&(s.newPassword="Password must be at least 8 characters"):s.newPassword="New password is required",r.confirmPassword?r.newPassword!==r.confirmPassword&&(s.confirmPassword="Passwords do not match"):s.confirmPassword="Please confirm your password",Object.keys(s).length>0){i(s);return}P(!0);try{const{error:h}=await k(r.newPassword);if(h){p.error("Failed to update password");return}c({currentPassword:"",newPassword:"",confirmPassword:""})}finally{P(!1)}},A=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 pb-20 lg:pb-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-8 py-6 md:py-10",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("nav",{className:"text-sm text-slate-500 mb-2 font-inter","aria-label":"Breadcrumb",children:"Home > Profile"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-2 font-poppins",children:"Account Settings"}),e.jsx("p",{className:"text-lg text-slate-600 font-inter",children:"Manage your account information and preferences"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx(w,{className:"p-6 rounded-3xl shadow-lg lg:col-span-1",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-brand-green to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx($,{className:"w-16 h-16 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 font-poppins mb-1",children:(a==null?void 0:a.full_name)||"User"}),e.jsx("p",{className:"text-sm text-slate-600 font-inter mb-4",children:a==null?void 0:a.email}),e.jsxs(H,{className:`${a!=null&&a.email_verified?"bg-brand-green":"bg-orange-500"} text-white border-0 mb-6`,children:[e.jsx(O,{className:"w-3 h-3 mr-1"}),a!=null&&a.email_verified?"Verified":"Unverified"]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 mb-2 font-inter",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:"Member since"})]}),e.jsx("p",{className:"text-sm font-semibold text-slate-900 font-poppins",children:a!=null&&a.created_at?A(a.created_at):"N/A"})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(w,{className:"p-6 rounded-3xl shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-6 font-poppins flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-brand-green"}),"Profile Information"]}),e.jsxs("form",{onSubmit:U,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2 font-inter",children:"Full Name"}),e.jsx("input",{type:"text",value:o.full_name,onChange:t=>x(s=>({...s,full_name:t.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-green focus:ring-2 focus:ring-brand-green/20 outline-none transition-all font-inter",disabled:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2 font-inter",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:o.email,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl bg-slate-50 text-slate-500 font-inter cursor-not-allowed",disabled:!0}),e.jsx("p",{className:"mt-1 text-xs text-slate-500 font-inter",children:"Email cannot be changed. Contact support if you need to update it."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2 font-inter",children:"Dashboard Type"}),e.jsx("select",{value:o.avatar_type,onChange:t=>x(s=>({...s,avatar_type:t.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-brand-green focus:ring-2 focus:ring-brand-green/20 outline-none transition-all font-inter bg-white",disabled:m,children:L.map(t=>e.jsxs("option",{value:t.value,children:[t.label," - ",t.desc]},t.value))}),e.jsx("p",{className:"mt-1 text-xs text-slate-600 font-inter",children:"Changes your dashboard layout and features to match your financial journey"})]}),e.jsx(y,{type:"submit",disabled:m,className:"w-full bg-brand-green hover:bg-brand-green/90 text-white py-3 rounded-xl shadow-lg font-semibold",children:m?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]}),e.jsxs(w,{className:"p-6 rounded-3xl shadow-lg",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 mb-6 font-poppins flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-brand-green"}),"Change Password"]}),e.jsxs("form",{onSubmit:M,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2 font-inter",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:r.currentPassword,onChange:t=>{c(s=>({...s,currentPassword:t.target.value})),i(s=>({...s,currentPassword:""}))},className:`w-full px-4 py-3 pr-12 border-2 rounded-xl focus:ring-2 focus:ring-brand-green/20 outline-none transition-all font-inter ${n.currentPassword?"border-red-500":"border-slate-200 focus:border-brand-green"}`,placeholder:"••••••••",disabled:d}),e.jsx("button",{type:"button",onClick:()=>D(!u),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:u?e.jsx(g,{className:"w-5 h-5"}):e.jsx(j,{className:"w-5 h-5"})})]}),n.currentPassword&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1 font-inter",children:[e.jsx(v,{className:"w-4 h-4"}),n.currentPassword]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2 font-inter",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",value:r.newPassword,onChange:t=>{c(s=>({...s,newPassword:t.target.value})),i(s=>({...s,newPassword:""}))},className:`w-full px-4 py-3 pr-12 border-2 rounded-xl focus:ring-2 focus:ring-brand-green/20 outline-none transition-all font-inter ${n.newPassword?"border-red-500":"border-slate-200 focus:border-brand-green"}`,placeholder:"••••••••",disabled:d}),e.jsx("button",{type:"button",onClick:()=>E(!f),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:f?e.jsx(g,{className:"w-5 h-5"}):e.jsx(j,{className:"w-5 h-5"})})]}),n.newPassword&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1 font-inter",children:[e.jsx(v,{className:"w-4 h-4"}),n.newPassword]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2 font-inter",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b?"text":"password",value:r.confirmPassword,onChange:t=>{c(s=>({...s,confirmPassword:t.target.value})),i(s=>({...s,confirmPassword:""}))},className:`w-full px-4 py-3 pr-12 border-2 rounded-xl focus:ring-2 focus:ring-brand-green/20 outline-none transition-all font-inter ${n.confirmPassword?"border-red-500":"border-slate-200 focus:border-brand-green"}`,placeholder:"••••••••",disabled:d}),e.jsx("button",{type:"button",onClick:()=>F(!b),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:b?e.jsx(g,{className:"w-5 h-5"}):e.jsx(j,{className:"w-5 h-5"})})]}),n.confirmPassword&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1 font-inter",children:[e.jsx(v,{className:"w-4 h-4"}),n.confirmPassword]})]}),e.jsx(y,{type:"submit",disabled:d,className:"w-full bg-brand-blue hover:bg-brand-blue/90 text-white py-3 rounded-xl shadow-lg font-semibold",children:d?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Update Password"]})})]})]})]})]})]})})};export{ae as default};
