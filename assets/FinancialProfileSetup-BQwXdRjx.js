import{u as je,a as ge,r,j as e,C as j,I as be,d as I,l as fe,m as Ne,n as ve,s as ye}from"./index-BnCNfFp6.js";import{B as g}from"./button-C589Oiyg.js";import{I as n}from"./input-D_RmWdpN.js";import{L as x}from"./label-M8yFblRO.js";import{S as v,a as y,b as S,c as C,d as c}from"./select-SwtHj_0k.js";import{S as $}from"./shield-CAItdAlX.js";import{L as k}from"./lock-JDdRbi5Z.js";import{C as Se}from"./calendar-cqw0RolR.js";import{C as K}from"./credit-card-MVXFGvIL.js";import{P as W}from"./plus-1wcRTawq.js";import{T as J}from"./trash-2-DHff4-gy.js";import{D as z}from"./dollar-sign-CMsGWwiP.js";import"./index-CEsohsXC.js";import"./index-DNm7w0Tv.js";import"./index-CcxI_3RT.js";import"./check-BeullT_H.js";const Be=()=>{const{user:V,profile:Ce,refreshSession:U}=je(),Y=ge(),[a,B]=r.useState(!1),[b,Z]=r.useState(""),[F,G]=r.useState(!1),[w,X]=r.useState(""),[L,q]=r.useState(""),[f,Q]=r.useState(""),[M,ee]=r.useState(""),[H,se]=r.useState(""),[_,te]=r.useState(""),[E,ae]=r.useState(""),[N,le]=r.useState(""),[h,re]=r.useState(""),[o,P]=r.useState([]),[m,O]=r.useState([]),[p,ne]=r.useState(""),[u,ie]=r.useState(""),[i,de]=r.useState({}),R=["January","February","March","April","May","June","July","August","September","October","November","December"],ce=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],oe=()=>{const s={id:Date.now().toString(),name:"",balance:0,credit_limit:0,apr:0,minimum_payment:0};P([...o,s])},me=s=>{P(o.filter(t=>t.id!==s))},D=(s,t,d)=>{P(o.map(l=>l.id===s?{...l,[t]:d}:l))},xe=()=>{const s={id:Date.now().toString(),type:"student",name:"",balance:0,monthly_payment:0,apr:0};O([...m,s])},he=s=>{O(m.filter(t=>t.id!==s))},A=(s,t,d)=>{O(m.map(l=>l.id===s?{...l,[t]:d}:l))},pe=()=>{const s={};if(b&&(b.length!==4||!/^\d{4}$/.test(b))&&(s.ssn="Must be exactly 4 digits"),w&&L&&f&&new Date().getFullYear()-parseInt(f)<18&&(s.dob="You must be 18 or older"),h){const t=parseInt(h);(t<300||t>850)&&(s.creditScore="Credit score must be between 300 and 850")}return N&&!/^\d{5}$/.test(N)&&(s.zip="Must be 5 digits"),de(s),Object.keys(s).length===0},T=()=>{const s=o.reduce((d,l)=>d+(l.balance||0),0),t=m.reduce((d,l)=>d+(l.balance||0),0);return s+t},ue=async s=>{if(s.preventDefault(),!pe()){I.error("Please fix the errors in the form");return}if(!V){I.error("User not found. Please log in again.");return}B(!0);try{const t=fe(Ne,"users",V.uid),d=w&&L&&f?new Date(parseInt(f),R.indexOf(w),parseInt(L)).toISOString():void 0;await ve(t,{financial_profile:{ssn_last_four:b||null,date_of_birth:d||null,address:M&&_&&E&&N?{street:M,apt:H||void 0,city:_,state:E,zip:N}:null,credit_score:h?parseInt(h):null,credit_cards:o.filter(l=>l.name&&l.balance>0),loans:m.filter(l=>l.name&&l.balance>0),total_debt:T(),monthly_income:p?parseFloat(p):null,monthly_expenses:u?parseFloat(u):null,profile_completed:!0,last_updated:new Date().toISOString()},updated_at:ye()}),await U(),I.success("Financial profile saved successfully! ðŸŽ‰"),Y("/dashboard")}catch(t){console.error("Error saving financial profile:",t),I.error("Failed to save profile. Please try again.")}finally{B(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 py-12 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-brand-green rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx($,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-2 font-poppins",children:"Financial Profile Setup"}),e.jsx("p",{className:"text-lg text-slate-600 font-inter",children:"Help us personalize your experience by sharing your financial information"})]}),e.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[e.jsxs(j,{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(k,{className:"w-6 h-6 text-brand-green"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 font-poppins",children:"Personal Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(x,{htmlFor:"ssn",className:"text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2",children:["Last 4 digits of SSN",e.jsx("span",{className:"text-xs text-slate-500 font-normal",children:"(Optional - for future credit monitoring)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(n,{id:"ssn",type:F?"text":"password",value:b,onChange:s=>Z(s.target.value.replace(/\D/g,"").slice(0,4)),placeholder:"â€¢â€¢â€¢â€¢",maxLength:4,className:`pr-10 ${i.ssn?"border-red-500":""}`,disabled:a}),e.jsx("button",{type:"button",onClick:()=>G(!F),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:F?"ðŸ™ˆ":"ðŸ‘ï¸"})]}),i.ssn&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.ssn}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"}),"256-bit encrypted â€¢ Never stored in plain text"]})]}),e.jsxs("div",{children:[e.jsxs(x,{className:"text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"}),"Date of Birth"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(v,{value:w,onValueChange:X,children:[e.jsx(y,{children:e.jsx(S,{placeholder:"Month"})}),e.jsx(C,{children:R.map(s=>e.jsx(c,{value:s,children:s},s))})]}),e.jsxs(v,{value:L,onValueChange:q,children:[e.jsx(y,{children:e.jsx(S,{placeholder:"Day"})}),e.jsx(C,{children:Array.from({length:31},(s,t)=>t+1).map(s=>e.jsx(c,{value:s.toString(),children:s},s))})]}),e.jsxs(v,{value:f,onValueChange:Q,children:[e.jsx(y,{children:e.jsx(S,{placeholder:"Year"})}),e.jsx(C,{children:Array.from({length:100},(s,t)=>new Date().getFullYear()-t).map(s=>e.jsx(c,{value:s.toString(),children:s},s))})]})]}),i.dob&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.dob})]}),e.jsxs("div",{children:[e.jsxs(x,{className:"text-sm font-semibold text-slate-700 mb-2 flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),"Home Address"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{placeholder:"Street Address",value:M,onChange:s=>ee(s.target.value),disabled:a}),e.jsx(n,{placeholder:"Apt / Unit (optional)",value:H,onChange:s=>se(s.target.value),disabled:a}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(n,{placeholder:"City",value:_,onChange:s=>te(s.target.value),disabled:a}),e.jsxs(v,{value:E,onValueChange:ae,children:[e.jsx(y,{children:e.jsx(S,{placeholder:"State"})}),e.jsx(C,{children:ce.map(s=>e.jsx(c,{value:s,children:s},s))})]})]}),e.jsx(n,{placeholder:"ZIP Code",value:N,onChange:s=>le(s.target.value.replace(/\D/g,"").slice(0,5)),maxLength:5,className:i.zip?"border-red-500":"",disabled:a}),i.zip&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.zip})]})]})]})]}),e.jsxs(j,{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx($,{className:"w-6 h-6 text-brand-green"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 font-poppins",children:"Credit Score"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"creditScore",className:"text-sm font-semibold text-slate-700 mb-2",children:"Current Credit Score (from Credit Karma, Experian, etc.)"}),e.jsx(n,{id:"creditScore",type:"number",value:h,onChange:s=>re(s.target.value),placeholder:"e.g., 720",min:"300",max:"850",className:i.creditScore?"border-red-500":"",disabled:a}),i.creditScore&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.creditScore}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Score range: 300-850"})]})]}),e.jsxs(j,{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"w-6 h-6 text-brand-green"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 font-poppins",children:"Credit Cards"})]}),e.jsxs(g,{type:"button",onClick:oe,variant:"outline",size:"sm",className:"flex items-center gap-2",disabled:a,children:[e.jsx(W,{className:"w-4 h-4"}),"Add Card"]})]}),o.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(K,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:'No credit cards added yet. Click "Add Card" to get started.'})]}):e.jsx("div",{className:"space-y-4",children:o.map(s=>e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-sm font-semibold text-slate-700",children:"Card Details"}),e.jsx(g,{type:"button",onClick:()=>me(s.id),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:a,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(n,{placeholder:"Card Name (e.g., Chase Sapphire)",value:s.name,onChange:t=>D(s.id,"name",t.target.value),disabled:a}),e.jsx(n,{type:"number",placeholder:"Current Balance",value:s.balance||"",onChange:t=>D(s.id,"balance",parseFloat(t.target.value)||0),disabled:a}),e.jsx(n,{type:"number",placeholder:"Credit Limit",value:s.credit_limit||"",onChange:t=>D(s.id,"credit_limit",parseFloat(t.target.value)||0),disabled:a}),e.jsx(n,{type:"number",placeholder:"APR % (optional)",value:s.apr||"",onChange:t=>D(s.id,"apr",parseFloat(t.target.value)||0),disabled:a})]})]},s.id))})]}),e.jsxs(j,{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"w-6 h-6 text-brand-green"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 font-poppins",children:"Loans"})]}),e.jsxs(g,{type:"button",onClick:xe,variant:"outline",size:"sm",className:"flex items-center gap-2",disabled:a,children:[e.jsx(W,{className:"w-4 h-4"}),"Add Loan"]})]}),m.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(z,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:'No loans added yet. Click "Add Loan" to get started.'})]}):e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-sm font-semibold text-slate-700",children:"Loan Details"}),e.jsx(g,{type:"button",onClick:()=>he(s.id),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:a,children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs(v,{value:s.type,onValueChange:t=>A(s.id,"type",t),children:[e.jsx(y,{children:e.jsx(S,{placeholder:"Loan Type"})}),e.jsxs(C,{children:[e.jsx(c,{value:"student",children:"Student Loan"}),e.jsx(c,{value:"auto",children:"Auto Loan"}),e.jsx(c,{value:"personal",children:"Personal Loan"}),e.jsx(c,{value:"mortgage",children:"Mortgage"}),e.jsx(c,{value:"other",children:"Other"})]})]}),e.jsx(n,{placeholder:"Loan Name (e.g., Federal Student Loan)",value:s.name,onChange:t=>A(s.id,"name",t.target.value),disabled:a}),e.jsx(n,{type:"number",placeholder:"Current Balance",value:s.balance||"",onChange:t=>A(s.id,"balance",parseFloat(t.target.value)||0),disabled:a}),e.jsx(n,{type:"number",placeholder:"Monthly Payment (optional)",value:s.monthly_payment||"",onChange:t=>A(s.id,"monthly_payment",parseFloat(t.target.value)||0),disabled:a})]})]},s.id))})]}),e.jsxs(j,{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(z,{className:"w-6 h-6 text-brand-green"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 font-poppins",children:"Income & Expenses"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"income",className:"text-sm font-semibold text-slate-700 mb-2",children:"Monthly Income (after taxes)"}),e.jsx(n,{id:"income",type:"number",value:p,onChange:s=>ne(s.target.value),placeholder:"e.g., 4500",disabled:a})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"expenses",className:"text-sm font-semibold text-slate-700 mb-2",children:"Monthly Expenses"}),e.jsx(n,{id:"expenses",type:"number",value:u,onChange:s=>ie(s.target.value),placeholder:"e.g., 3200",disabled:a})]})]})]}),(o.length>0||m.length>0||p||u)&&e.jsxs(j,{className:"p-6 md:p-8 bg-gradient-to-br from-brand-green/5 to-emerald-50",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4 font-poppins",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[T()>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total Debt"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",T().toLocaleString()]})]}),h&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Credit Score"}),e.jsx("p",{className:"text-2xl font-bold text-brand-green",children:h})]}),p&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Monthly Income"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",parseFloat(p).toLocaleString()]})]}),u&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Monthly Expenses"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:["$",parseFloat(u).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(g,{type:"button",onClick:()=>Y("/dashboard"),variant:"outline",className:"flex-1",disabled:a,children:"Skip for Now"}),e.jsx(g,{type:"submit",className:"flex-1 bg-brand-green hover:bg-brand-green/90 text-white",disabled:a,children:a?"Saving...":"Save Profile"})]})]}),e.jsxs("div",{className:"mt-8 text-center text-sm text-slate-500",children:[e.jsxs("p",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Your data is encrypted and securely stored"]}),e.jsx("p",{children:"We never share your personal information with third parties"})]})]})})};export{Be as default};
